# TaskJWT

**Используемые технологии:**

- Go
- JWT
- MongoDB

**Задание:**

Написать часть сервиса аутентификации.

Два REST маршрута:

- Первый маршрут выдает пару Access, Refresh токенов для пользователя сидентификатором (GUID) указанным в параметре запроса
- Второй маршрут выполняет Refresh операцию на пару Access, Refreshтокенов

**Требования:**

Access токен тип JWT, алгоритм SHA512, хранить в базе строго запрещено.

Refresh токен тип произвольный, формат передачи base64, хранится в базеисключительно в виде bcrypt хеша, должен быть защищен от изменения настороне клиента и попыток повторного использования.

Access, Refresh токены обоюдно связаны, Refresh операцию для Access токена можно выполнить только тем Refresh токеном который был выдан вместе с ним.

**Результат:**

По запросу guid сервер генерирует Token и RefreshToken и отсылает клиенту. Token хранится в cookie, refreshToken передается в базу и хранится там в виде bcrypt хеша. Token имеет время жизни и как только оно подходит к концу клиент запрашивает, клиент делает запрос на обновление tokena. Сервер принимает запрос, проверяет RefreshToken, если такого токена нет, возращает ошибку, если такой токен есть в базе, то обновляет токены и отсылает клиенту. 

Если клиент как то изменит RefreshTоken, то он не проидет проверку валидации и вернет ошибку.

![Снимок экрана от 2022-07-06 20-25-23](https://user-images.githubusercontent.com/56618443/177558239-f0aba749-452c-4e15-a70e-e493aa6ffbc3.png)

![Снимок экрана от 2022-07-06 20-25-46](https://user-images.githubusercontent.com/56618443/177558302-e4eeefd6-6e34-4407-bb66-18c4cfdd5676.png)

![Снимок экрана от 2022-07-06 20-26-03](https://user-images.githubusercontent.com/56618443/177558339-c753c519-3c00-4cb8-98de-f239806eb497.png)

![Снимок экрана от 2022-07-06 20-56-12](https://user-images.githubusercontent.com/56618443/177558375-9c026ef1-7f43-4a4f-ba57-8fc315006ea3.png)

